"0","data <- read.csv(file=""data/dataset_mood_smartphone.csv"") %>%"
"0","  tbl_df() %>%"
"0","  separate(time, c(""date"", ""time""), sep="" "") %>%"
"0","  spread(variable,value) %>% # organise"
"0","  mutate(appCat.builtin=replace(appCat.builtin, appCat.builtin<0, NA)) %>% #clean"
"0","  group_by(id,date)"
"0","data$date <- as.Date(data$date, origin = min(data$date))"
"0","ordvars = names(data)[1:4]"
"0","meanvars = c(names(data)[5],names(data)[19:21])"
"0","sumvars = names(data)[! names(data) %in% c(meanvars, ordvars)]"
"0","data_agg = merge("
"0","  arrange(aggregate(data[meanvars], by=list(data$id, data$date),"
"0","                    FUN=mean, na.rm=TRUE), Group.1,Group.2),"
"0","  arrange(aggregate(data[sumvars], by=list(data$id, data$date),"
"0","                    FUN=sum,  na.rm=TRUE), Group.1,Group.2)"
"0","  )[, c(1,2,6,4,5,3,7:21)] %>% "
"0","  dplyr::rename(id=Group.1, date=Group.2) %>%"
"0","  tbl_df()"
